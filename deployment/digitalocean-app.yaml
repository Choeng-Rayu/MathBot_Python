name: mathbot-telegram
services:
- name: mathbot-api
  source_dir: /
  github:
    repo: Choeng-Rayu/MathBot_Python  # Update this with your actual GitHub username
    branch: main
    deploy_on_push: true

  # Build configuration
  build_command: pip install --upgrade pip && pip install -r requirements.txt

  # Runtime configuration
  run_command: python main.py

  # Environment configuration
  environment_slug: python
  instance_count: 1
  instance_size_slug: basic-xxs
  
  # Health check
  health_check:
    http_path: /health
    initial_delay_seconds: 30
    period_seconds: 10
    timeout_seconds: 5
    success_threshold: 1
    failure_threshold: 3
  
  # HTTP configuration
  http_port: 8000

  # Environment variables with actual values for immediate deployment
  envs:
  - key: ENVIRONMENT
    value: production
  - key: HOST
    value: 0.0.0.0
  - key: PORT
    value: "8000"
  - key: LOG_LEVEL
    value: INFO
  - key: TELEGRAM_BOT_TOKEN
    value: "7659640601:AAHvuGO4r1esUjG3HYqkdcKNsUlW2KjghR8"
    scope: RUN_TIME
  - key: MONGODB_URI
    value: "mongodb+srv://ChoengRayu:C9r6nhxOVLCUkkGd@cluster0.2ott03t.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0"
    scope: RUN_TIME
  - key: DEEPSEEK_API_KEY
    value: "sk-698124ba5ed24bcea3c8d298b73f2f52"
    scope: RUN_TIME
  - key: WEBHOOK_SECRET
    value: "mathbot_webhook_secret_2025"
    scope: RUN_TIME
  - key: SECRET_KEY
    value: "mathbot_secret_key_2025_change_in_production"
    scope: RUN_TIME
  - key: ALLOWED_HOSTS
    value: "*"
    scope: RUN_TIME

# Optional: Add a database if you want to use DigitalOcean Managed Database
# databases:
# - name: mathbot-db
#   engine: MONGODB
#   version: "5"
#   size: db-s-1vcpu-1gb
